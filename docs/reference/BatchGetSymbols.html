<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Function to download financial data — BatchGetSymbols • BatchGetSymbols</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Function to download financial data — BatchGetSymbols" />

<meta property="og:description" content="This function is designed to make batch downloads of financial data using getSymbols.
Based on a set of tickers and a time period, the function will download the data for each ticker and return a report of the process, along with the actual data in the long dataframe format.
The main advantage of the function is that it automatically recognizes the source of the dataset from the ticker and structures the resulting data from different sources in the long format.
A caching system is also presente, making it very fast." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">BatchGetSymbols</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">2.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/BatchGetSymbols-vignette.html">Using BatchGetSymbols to download financial data for several tickers</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Function to download financial data</h1>
    
    <div class="hidden name"><code>BatchGetSymbols.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This function is designed to make batch downloads of financial data using <code><a href='http://www.rdocumentation.org/packages/quantmod/topics/getSymbols'>getSymbols</a></code>.
Based on a set of tickers and a time period, the function will download the data for each ticker and return a report of the process, along with the actual data in the long dataframe format.
The main advantage of the function is that it automatically recognizes the source of the dataset from the ticker and structures the resulting data from different sources in the long format.
A caching system is also presente, making it very fast.</p>
    
    </div>

    <pre class="usage"><span class='fu'>BatchGetSymbols</span>(<span class='no'>tickers</span>, <span class='kw'>first.date</span> <span class='kw'>=</span> <span class='fu'>Sys.Date</span>() - <span class='fl'>30</span>,
  <span class='kw'>last.date</span> <span class='kw'>=</span> <span class='fu'>Sys.Date</span>(), <span class='kw'>thresh.bad.data</span> <span class='kw'>=</span> <span class='fl'>0.75</span>,
  <span class='kw'>bench.ticker</span> <span class='kw'>=</span> <span class='st'>"^GSPC"</span>, <span class='kw'>type.return</span> <span class='kw'>=</span> <span class='st'>"arit"</span>, <span class='kw'>freq.data</span> <span class='kw'>=</span> <span class='st'>"daily"</span>,
  <span class='kw'>do.complete.data</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>do.cache</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>cache.folder</span> <span class='kw'>=</span> <span class='st'>"BGS_Cache"</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>tickers</th>
      <td><p>A vector of tickers. If not sure whether the ticker is available, check the websites of google and yahoo finance. The source for downloading
the data can either be Google or Yahoo. The function automatically selects the source webpage based on the input ticker.</p></td>
    </tr>
    <tr>
      <th>first.date</th>
      <td><p>The first date to download data (date or char as YYYY-MM-DD)</p></td>
    </tr>
    <tr>
      <th>last.date</th>
      <td><p>The last date to download data (date or char as YYYY-MM-DD)</p></td>
    </tr>
    <tr>
      <th>thresh.bad.data</th>
      <td><p>A percentage threshold for defining bad data. The dates of the benchmark ticker are compared to each asset. If the percentage of non-missing dates
with respect to the benchmark ticker is lower than thresh.bad.data, the function will ignore the asset (default = 0.75)</p></td>
    </tr>
    <tr>
      <th>bench.ticker</th>
      <td><p>The ticker of the benchmark asset used to compare dates. My suggestion is to use the main stock index of the market from where the data is coming from (default = ^GSPC (SP500, US market))</p></td>
    </tr>
    <tr>
      <th>type.return</th>
      <td><p>Type of price return to calculate: 'arit' (default) - aritmetic, 'log' - log returns.</p></td>
    </tr>
    <tr>
      <th>freq.data</th>
      <td><p>Frequency of financial data ('daily', 'weekly', 'monthly', 'yearly')</p></td>
    </tr>
    <tr>
      <th>do.complete.data</th>
      <td><p>Return a complete/balanced dataset? If TRUE, all missing pairs of ticker-date will be replaced by NA (default = FALSE)</p></td>
    </tr>
    <tr>
      <th>do.cache</th>
      <td><p>Use caching system? (default = TRUE)</p></td>
    </tr>
    <tr>
      <th>cache.folder</th>
      <td><p>Where to save cache files? (default = 'BGS_Cache')</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list with the following items:</p><dl class='dl-horizontal'>
<dt>df.control </dt><dd><p>A dataframe containing the results of the download process for each asset</p></dd>
<dt>df.tickers</dt><dd><p>A dataframe with the financial data for all valid tickers</p></dd> </dl>

    
    <h2 class="hasAnchor" id="warning"><a class="anchor" href="#warning"></a>Warning</h2>

    
    <p>Do notice that adjusted prices are not available from google finance. When using this source, the function will output NA values for this column.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><a href='http://www.rdocumentation.org/packages/quantmod/topics/getSymbols'>getSymbols</a></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>tickers</span> <span class='kw'>&lt;-</span> <span class='fu'>c</span>(<span class='st'>'FB'</span>,<span class='st'>'NYSE:MMM'</span>)

<span class='no'>first.date</span> <span class='kw'>&lt;-</span> <span class='fu'>Sys.Date</span>()-<span class='fl'>30</span>
<span class='no'>last.date</span> <span class='kw'>&lt;-</span> <span class='fu'>Sys.Date</span>()

<span class='no'>l.out</span> <span class='kw'>&lt;-</span> <span class='fu'>BatchGetSymbols</span>(<span class='kw'>tickers</span> <span class='kw'>=</span> <span class='no'>tickers</span>,
                         <span class='kw'>first.date</span> <span class='kw'>=</span> <span class='no'>first.date</span>,
                        <span class='kw'>last.date</span> <span class='kw'>=</span> <span class='no'>last.date</span>, <span class='kw'>do.cache</span><span class='kw'>=</span><span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; 
#&gt; Running BatchGetSymbols for:
#&gt;    tickers = FB, NYSE:MMM
#&gt;    Downloading data for benchmark ticker
#&gt; FB | yahoo (1|2) - OK!
#&gt; NYSE:MMM | google (2|2) - Error in download..</div><div class='input'>
<span class='fu'>print</span>(<span class='no'>l.out</span>$<span class='no'>df.control</span>)</div><div class='output co'>#&gt;     ticker    src download.status total.obs perc.benchmark.dates
#&gt; 1       FB  yahoo              OK        22                    1
#&gt; 2 NYSE:MMM google          NOT OK         0                    0
#&gt;   threshold.decision
#&gt; 1               KEEP
#&gt; 2                OUT</div><div class='input'><span class='fu'>print</span>(<span class='no'>l.out</span>$<span class='no'>df.tickers</span>)</div><div class='output co'>#&gt;    price.open price.high price.low price.close   volume price.adjusted
#&gt; 1      161.58     162.28    158.67      159.33 36031000         159.33
#&gt; 2      160.00     163.66    159.53      162.43 23109500         162.43
#&gt; 3      161.46     161.46    157.35      158.85 25739600         158.85
#&gt; 4      159.21     160.90    156.20      157.33 25744000         157.33
#&gt; 5      155.54     158.34    154.39      157.25 24046000         157.25
#&gt; 6      157.69     160.59    157.42      157.90 18844400         157.90
#&gt; 7      156.82     157.69    151.31      151.38 30610000         151.38
#&gt; 8      150.13     154.81    149.16      153.35 35338900         153.35
#&gt; 9      156.73     156.89    151.30      153.74 25293500         153.74
#&gt; 10     153.32     155.57    152.55      153.52 15433500         153.52
#&gt; 11     155.40     159.46    155.01      158.78 19180100         158.78
#&gt; 12     159.56     160.49    157.95      159.42 17592000         159.42
#&gt; 13     158.51     158.66    153.28      154.92 21675100         154.92
#&gt; 14     155.86     157.35    153.55      154.05 19761300         154.05
#&gt; 15     154.76     157.34    154.46      154.78 15424700         154.78
#&gt; 16     151.22     154.77    150.85      154.39 19095000         154.39
#&gt; 17     154.28     154.65    145.60      146.04 27744600         146.04
#&gt; 18     147.73     152.21    147.00      150.95 22105700         150.95
#&gt; 19     145.82     149.00    143.80      145.37 31303300         145.37
#&gt; 20     148.50     148.83    139.03      142.09 31336800         142.09
#&gt; 21     139.94     146.64    139.74      146.22 50528300         146.22
#&gt; 22     155.00     156.40    148.96      151.79 59993400         151.79
#&gt;      ref.date ticker ret.adjusted.prices ret.closing.prices
#&gt; 1  2018-10-02     FB                  NA                 NA
#&gt; 2  2018-10-03     FB        0.0194564173       0.0194564173
#&gt; 3  2018-10-04     FB       -0.0220401844      -0.0220401844
#&gt; 4  2018-10-05     FB       -0.0095688004      -0.0095688004
#&gt; 5  2018-10-08     FB       -0.0005084981      -0.0005084981
#&gt; 6  2018-10-09     FB        0.0041335072       0.0041335072
#&gt; 7  2018-10-10     FB       -0.0412918888      -0.0412918888
#&gt; 8  2018-10-11     FB        0.0130136143       0.0130136143
#&gt; 9  2018-10-12     FB        0.0025431952       0.0025431952
#&gt; 10 2018-10-15     FB       -0.0014309938      -0.0014309938
#&gt; 11 2018-10-16     FB        0.0342626033       0.0342626033
#&gt; 12 2018-10-17     FB        0.0040307281       0.0040307281
#&gt; 13 2018-10-18     FB       -0.0282273244      -0.0282273244
#&gt; 14 2018-10-19     FB       -0.0056157695      -0.0056157695
#&gt; 15 2018-10-22     FB        0.0047386951       0.0047386951
#&gt; 16 2018-10-23     FB       -0.0025197054      -0.0025197054
#&gt; 17 2018-10-24     FB       -0.0540838529      -0.0540838529
#&gt; 18 2018-10-25     FB        0.0336209548       0.0336209548
#&gt; 19 2018-10-26     FB       -0.0369658967      -0.0369658967
#&gt; 20 2018-10-29     FB       -0.0225631087      -0.0225631087
#&gt; 21 2018-10-30     FB        0.0290661209       0.0290661209
#&gt; 22 2018-10-31     FB        0.0380932291       0.0380932291</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#warning">Warning</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Marcelo Perlin.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

